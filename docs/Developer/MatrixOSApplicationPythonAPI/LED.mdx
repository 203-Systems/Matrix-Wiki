---
sidebar_position: 2
---
import GithubLink from '@site/src/components/GithubLink/GithubLink';

# LED API

## Overview

The LED system in MatrixOS provides control over the 8x8 LED matrix with layer support, real-time updates, and cross-fade animations. The LED API is available as `MatrixOS.LED` and is imported by default.

For some LED functions, you can specify a layer ID. If you don't specify a layer ID, the API will use layer 255 (the topmost layer). Changes only take effect when you call `Update()`.

For immediate updates, write to layer 0 (the active buffer). Changes render immediately unless paused with `PauseUpdate(True)`. This is ideal for real-time effects but may cause flickering.

*The Python LED API is implemented in <GithubLink path="Applications/Python/PikaPython/MatrixOS_MatrixOS.LED.py"/> with type hints in <GithubLink path="Applications/Python/PikaPython/_MatrixOS_MatrixOS.LED.pyi"/>.*

---

## `MatrixOS.LED.NextBrightness`
```python
def NextBrightness() -> None
```

Cycles to the next predefined brightness level for the LEDs.

**Example:**
```python
MatrixOS.LED.NextBrightness()
```

---

## `MatrixOS.LED.SetBrightness`
```python
def SetBrightness(brightness: int) -> None
```

Sets the brightness level of the LEDs.

**Parameters:**
- `brightness` (`int`): Brightness level (0-255)

**Example:**
```python
MatrixOS.LED.SetBrightness(128)  # Set to 50% brightness
```

---

## `MatrixOS.LED.SetBrightnessMultiplier`
```python
def SetBrightnessMultiplier(partition_name: str, multiplier: float) -> None
```

Applies a brightness multiplier to a specific LED partition.

**Parameters:**
- `partition_name` (`str`): Name of the partition to modify
- `multiplier` (`float`): Brightness multiplier

**Example:**
```python
MatrixOS.LED.SetBrightnessMultiplier("keypad", 0.8)  # Set keypad brightness to 0.8x
```

---

## `MatrixOS.LED.SetColor`
```python
def SetColor(xy: Point, color: Color, layer: int) -> None
```

Sets the color of a specific LED at coordinates (x, y).

**Parameters:**
- `xy` (`Point`): LED coordinates (0-7 for both x and y)
- `color` (`Color`): Color to set
- `layer` (`int`): Layer ID to write to

**Example:**
```python
point = Point(2, 3)
red = Color(255, 0, 0)
MatrixOS.LED.SetColor(point, red, 255)  # Set LED at (2,3) to red
```

---

## `MatrixOS.LED.SetColorByID`
```python
def SetColorByID(id: int, color: Color, layer: int) -> None
```

Sets the color of an LED by its ID (0-63 for 8x8 matrix).

**Parameters:**
- `id` (`int`): LED ID (0-63)
- `color` (`Color`): Color to set
- `layer` (`int`): Layer ID to write to

**Example:**
```python
MatrixOS.LED.SetColorByID(0, Color(0, 255, 0), 255)  # Set first LED to green
```

---

## `MatrixOS.LED.Fill`
```python
def Fill(color: Color, layer: int) -> None
```

Fills all LEDs with the specified color.

**Parameters:**
- `color` (`Color`): Color to fill with
- `layer` (`int`): Layer ID to write to

**Example:**
```python
MatrixOS.LED.Fill(Color(0, 0, 255), 255)  # Fill all LEDs with blue
```

---

## `MatrixOS.LED.FillPartition`
```python
def FillPartition(partition: str, color: Color, layer: int) -> None
```

Fills a specific LED partition with the specified color.

**Parameters:**
- `partition` (`str`): Partition name (e.g., "keypad", "function")
- `color` (`Color`): Color to fill with
- `layer` (`int`): Layer ID to write to

**Example:**
```python
MatrixOS.LED.FillPartition("keypad", Color(255, 255, 0), 255)  # Fill keypad with yellow
```

---

## `MatrixOS.LED.Update`
```python
def Update(layer: int) -> None
```

Updates the specified layer, making changes visible on the device.

**Parameters:**
- `layer` (`int`): Layer ID to update

**Example:**
```python
MatrixOS.LED.Update(255)  # Update the top layer
```

---

## `MatrixOS.LED.CurrentLayer`
```python
def CurrentLayer() -> int
```

Returns the current active layer ID.

**Returns:**
- `int`: Current layer ID

---

## `MatrixOS.LED.CreateLayer`
```python
def CreateLayer(crossfade: int) -> int
```

Creates a new LED layer with optional crossfade animation.

**Parameters:**
- `crossfade` (`int`): Crossfade duration in milliseconds

**Returns:**
- `int`: New layer ID

**Example:**
```python
new_layer = MatrixOS.LED.CreateLayer(500)  # Create layer with 500ms crossfade
```

---

## `MatrixOS.LED.CopyLayer`
```python
def CopyLayer(dest: int, src: int) -> None
```

Copies the contents of one layer to another.

**Parameters:**
- `dest` (`int`): Destination layer ID
- `src` (`int`): Source layer ID

---

## `MatrixOS.LED.DestroyLayer`
```python
def DestroyLayer(crossfade: int) -> bool
```

Destroys the current layer with optional crossfade animation.

**Parameters:**
- `crossfade` (`int`): Crossfade duration in milliseconds

**Returns:**
- `bool`: True if successful

---

## `MatrixOS.LED.Fade`
```python
def Fade(crossfade: int) -> None
```

Applies a fade effect with specified duration.

**Parameters:**
- `crossfade` (`int`): Fade duration in milliseconds

---

## `MatrixOS.LED.PauseUpdate`
```python
def PauseUpdate(pause: bool) -> None
```

Pauses or resumes LED updates.

**Parameters:**
- `pause` (`bool`): True to pause, False to resume

**Example:**
```python
MatrixOS.LED.PauseUpdate(True)   # Pause updates
# Make multiple changes...
MatrixOS.LED.PauseUpdate(False)  # Resume updates
```

---

## `MatrixOS.LED.GetLEDCount`
```python
def GetLEDCount() -> int
```

Returns the total number of LEDs on the device.

**Returns:**
- `int`: Number of LEDs (typically 64 for 8x8 matrix)

---

## Layer Management Best Practices

### Real-time Effects
For real-time effects like visualizers, write directly to layer 0:
```python
# Real-time audio visualizer
for i in range(64):
    MatrixOS.LED.SetColorByID(i, Color(intensity, 0, 0), 0)
# No need to call Update() - changes are immediate
```

### Smooth Transitions
For smooth transitions between states, use layers with crossfade:
```python
# Create new layer with fade
new_layer = MatrixOS.LED.CreateLayer(1000)  # 1 second crossfade

# Draw new content
MatrixOS.LED.Fill(Color(0, 255, 0), new_layer)
MatrixOS.LED.Update(new_layer)
```

### Batch Updates
For multiple changes, update them then update:
```python
MatrixOS.LED.PauseUpdate(True)

# Make multiple changes
for x in range(8):
    for y in range(8):
        MatrixOS.LED.SetColor(Point(x, y), Color(x*32, y*32, 0), 255)

MatrixOS.LED.Update()
```